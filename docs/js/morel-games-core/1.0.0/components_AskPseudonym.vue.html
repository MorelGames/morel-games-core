<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/AskPseudonym.vue</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/AskPseudonym.vue</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>&lt;template>
  &lt;div class="ask-pseudonym">
    &lt;b-field :custom-class="size" :position="position">
      &lt;template slot="label">{{ $t(label) }}&lt;/template>
      &lt;b-field :type="unfilled_error ? 'is-danger' : type">
        &lt;b-input
          :placeholder="$t(placeholder)"
          :size="size + ' is-expanded'"
          :maxlength="maxlength"
          v-model.trim="pseudonym"
          @keyup.native.enter="start_game"
          autofocus
        >&lt;/b-input>
        &lt;p class="control">
          &lt;button
            class="button"
            :class="[size, type]"
            :aria-label="$t(labelButton)"
            @click="start_game"
          >
            &lt;b-icon icon="chevron-right">&lt;/b-icon>
          &lt;/button>
        &lt;/p> &lt;/b-field
    >&lt;/b-field>
    &lt;p class="joining-existing-game" v-if="is_existing_game &amp;&amp; !kick_reason">
      {{ $t("You're joining an existing game.")}}&lt;br />
      &lt;i18n path="If you wish, you can also {create_new_game}.">
        &lt;a href="#" @click.prevent="erase_slug" slot="create_new_game">{{ $t("create a new game") }}&lt;/a>
      &lt;/i18n>
    &lt;/p>
    &lt;b-message v-if="kick_reason" type="is-danger" class="kick-reason">
      &lt;p>
        &lt;template v-if="kick_reason === 'locked'">
          {{ $t("You cannot join this game because it's locked.") }}
        &lt;/template>
        &lt;template v-else>
          {{ $t("You got kicked out of the game.") }}
        &lt;/template>
      &lt;/p>
      &lt;p>
        &lt;b-button type="is-danger" @click="create_new_game">{{ $t("Create a new game") }}&lt;/b-button>
      &lt;/p>
    &lt;/b-message>
  &lt;/div>
&lt;/template>

&lt;script>
import { mapState } from "vuex";

/**
 * A component that displays the pseudonym field, typically used as the first
 * screen of the game.
 */
export default {
  props: {
    /**
     * The field's label.
     */
    label: {
      type: String,
      default: "What's your name?"
    },

    /**
     * The button's aria-label, for accessibility.
     */
    "label-button": {
      type: String,
      default: "Join the game"
    },

    /**
     * The placeholder displayed in the field.
     */
    placeholder: {
      type: String,
      default: "Enter your nameâ€¦"
    },

    /**
     * The component's style type. Can be any Bulma style.
     */
    type: {
      type: String,
      default: 'is-primary'
    },

    /**
     * The component size.
     * @values is-small, is-medium, is-large, &lt;empty>.
     */
    size: {
      type: String,
      default: "is-large"
    },

    /**
     * The component's position (including label alignment).
     * @values is-left, is-centered, is-right.
     */
    position: {
      type: String,
      default: "is-centered"
    },

    /**
     * The max length of the pseudonym.
     */
    maxlength: {
      type: Number,
      default: 32
    }
  },

  data() {
    return {
      pseudonym: "",
      unfilled_error: false,
      starting: false
    };
  },

  computed: {
    ...mapState('morel', {
      is_existing_game: state => !!state.slug,
      kick_reason: state => state.kick_reason
    })
  },

  mounted: function() {
    this.pseudonym = localStorage.getItem("morel-pseudonym") || ""
  },

  methods: {
    start_game() {
      if (this.pseudonym) {
        this.starting = true
        setTimeout(() => this.starting = false, 1000)

        localStorage.setItem("morel-pseudonym", this.pseudonym)
        this.$store.dispatch("morel/set_pseudonym_and_connect", this.pseudonym)
      }
      else {
        this.unfilled_error = true
        setTimeout(() => this.unfilled_error = false, 2500)
      }
    },
    erase_slug() {
      this.$store.dispatch("morel/set_slug", "")
      this.$store.commit("morel/set_kick_reason", null)
    },
    create_new_game() {
      this.erase_slug()
      this.start_game()
    }
  }
};
&lt;/script>

&lt;style lang="sass">
@import "~bulma/sass/utilities/mixins"

.ask-pseudonym
  .field
    &amp;.has-addons-centered
      text-align: center
    &amp;.has-addons-right
      text-align: right
  +mobile
    padding: 0 1rem

div.field div.field
  margin-top: 2em !important

p.joining-existing-game
  text-align: center

.kick-reason
  margin: auto
  width: 100%

  +mobile
    width: 100%

  .message-body
    border: none

    .media-content p
      text-align: center

      &amp; + p
        margin-top: 1rem
&lt;/style>
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-AskPseudonym.html">AskPseudonym</a></li><li><a href="module-Players.html">Players</a></li></ul><h3>Classes</h3><ul><li><a href="MorelClient.html">MorelClient</a></li><li><a href="MorelI18n.html">MorelI18n</a></li></ul><h3>Global</h3><ul><li><a href="global.html#MorelStore">MorelStore</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.4</a> on Thu May 07 2020 13:42:35 GMT+0200 (GMT+02:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
